---
import AppLayout from '@/layouts/AppLayout.astro';
import DashboardStats from '@/components/dashboard/DashboardStats.vue';
import ExpenseChart from '@/components/dashboard/ExpenseChart.vue';
import RecentActivity from '@/components/dashboard/RecentActivity.vue';

// User is attached by middleware (already authenticated by middleware)
const user = Astro.locals.user!;
---

<AppLayout title="Dashboard - Balance Pal">
  <div class="mx-auto max-w-7xl p-4 md:p-6 lg:p-8">
    <!-- Page Header -->
    <div class="mb-8">
      <h1 class="text-2xl font-bold text-gray-900 md:text-3xl">Dashboard</h1>
      <p class="mt-1 text-gray-600">Welcome back! Here's your expense overview.</p>
    </div>

    <!-- Quick Stats (Vue Island) -->
    <div class="mb-8">
      <DashboardStats client:load currentUserId={user.id} />
    </div>

    <!-- Main Content Grid -->
    <div class="grid gap-6 lg:grid-cols-3">
      <!-- Expense Chart -->
      <div class="lg:col-span-2">
        <ExpenseChart client:load />
      </div>

      <!-- Recent Activity (Vue Island) -->
      <div>
        <RecentActivity client:load currentUserId={user.id} />
      </div>
    </div>
  </div>
</AppLayout>
