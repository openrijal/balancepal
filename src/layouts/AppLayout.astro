---
import BaseLayout from './BaseLayout.astro';
import Sidebar from '@/components/layout/Sidebar.vue';

interface Props {
  title?: string;
  description?: string;
}

const { title = 'Dashboard - Balance Pal', description = 'Manage your shared expenses' } =
  Astro.props;

const currentPath = Astro.url.pathname;
---

<BaseLayout title={title} description={description}>
  <div class="bg-surface-dim min-h-screen">
    <!-- Desktop Layout -->
    <div class="hidden md:flex">
      <!-- Sidebar -->
      <aside class="sticky top-0 h-screen w-64 border-r border-gray-200 bg-white">
        <Sidebar client:load currentPath={currentPath} />
      </aside>

      <!-- Main Content -->
      <main class="min-h-screen flex-1">
        <slot />
      </main>
    </div>

    <!-- Mobile Layout -->
    <div class="flex min-h-screen flex-col md:hidden">
      <!-- Top Header -->
      <header
        class="safe-area-inset-top sticky top-0 z-40 border-b border-gray-200 bg-white/95 backdrop-blur-sm"
      >
        <div class="flex h-14 items-center justify-between px-4">
          <div class="flex items-center gap-2">
            <div class="bg-sage flex h-8 w-8 items-center justify-center rounded-lg">
              <span class="text-sm font-bold text-white">B</span>
            </div>
            <span class="font-semibold text-gray-900">Balance Pal</span>
          </div>
          <slot name="header-right" />
        </div>
      </header>

      <!-- Main Content -->
      <main class="flex-1 pb-20">
        <slot />
      </main>

      <!-- Bottom Navigation -->
      <nav
        class="safe-area-inset-bottom fixed right-0 bottom-0 left-0 z-40 border-t border-gray-200 bg-white/95 backdrop-blur-sm"
      >
        <Sidebar client:load mobile={true} currentPath={currentPath} />
      </nav>
    </div>
  </div>
</BaseLayout>
